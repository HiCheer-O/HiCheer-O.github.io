import{_ as s,c as e,o as a,a as t}from"./app-Y7YybkpV.js";const i="/assets/image-20240913170430714-Bfl75U2I.png",o="/assets/image-20240913170942286-DpNY7Sld.png",c="/assets/image-20240913171014631-BUFVhYvN.png",d="/assets/image-20240913171039347-Ep1jyLwN.png",l="/assets/image-20240913172832630-S56Br0AH.png",n="/assets/image-20240913173014352-oQhwsw2y.png",p="/assets/image-20240913173328445-D7323tmH.png",h="/assets/image-20240913173351808-9XWKH6PL.png",r="/assets/image-20240913173542005-BwjZx_Bd.png",g="/assets/image-20240913173646480-Cn5KhUAY.png",k={},m=t('<h3 id="前言" tabindex="-1"><a class="header-anchor" href="#前言"><span>前言</span></a></h3><blockquote><p><code>Harbor</code>是一个类似于 <code>Docker-Hub</code>的容器仓库，属于本地部署的镜像仓库，同样包含<code>用户管理</code>、<code>权限管理</code>、<code>镜像管理</code>。</p><p>本次安装使用的是 <code>Docker</code>与<code>docker-compose</code>，相对于传统的二进制文件安装相比，不需要关心复杂的服务器环境，只需要在服务器上安装 <code>Docker</code>即可；使用 <code>Docker</code>的时候我们只关注数据的持久化和<code>Docker容器</code>与<code>宿主机</code>的端口映射即可，其中数据持久化包括 <code>conf</code>、<code>log</code>、<code>镜像</code>等。</p></blockquote><h3 id="基础环境" tabindex="-1"><a class="header-anchor" href="#基础环境"><span>基础环境</span></a></h3><table><thead><tr><th>名称</th><th>版本</th></tr></thead><tbody><tr><td>服务器及操作系统</td><td>Linux、Centos 7</td></tr><tr><td>Docker</td><td>Docker version 26.1.3</td></tr><tr><td>Docker Compose</td><td>Docker Compose version v2.27.1</td></tr></tbody></table><h3 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h3><ol><li><p>进入安装目录</p><div class="language-bash" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /opt</span></span></code></pre></div><p><img src="'+i+`" alt="image-20240913170430714" width="1804" height="152"></p></li><li><p>下载 Harbor 安装包</p><blockquote><p>Harbor是<code>github</code>可能会<code>失败</code>，也可能会相对来说<code>比较慢</code>，多试几次一般都可以拉下来</p></blockquote><div class="language-bash" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 下载最新的 Harbor 安装包（例如 v2.11.0 版本）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">wget</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://github.com/goharbor/harbor/releases/download/v2.11.0/harbor-online-installer-v2.11.0.tgz</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 解压缩</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">tar</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> xvf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> harbor-online-installer-v2.11.0.tgz</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 进入 Harbor 文件夹</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> harbor</span></span></code></pre></div><p><img src="`+o+'" alt="image-20240913170942286" width="5000" height="958"></p><p><img src="'+c+'" alt="image-20240913171014631" width="2510" height="418"></p><p><img src="'+d+`" alt="image-20240913171039347" width="1648" height="176"></p><ol start="3"><li><p>修改<code>harbor.yml</code>配置文件</p><blockquote><p>这个文件只在安装<code>harbor</code>的时候使用一次，后续参数调整在<code>docker-compose.yml</code>中调整，并且<code>docker-compose.yml</code>会在执行<code>install.sh</code>的时候自动创建。</p></blockquote><div class="language-bash" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 复制 harbor.yml</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> harbor.yml.tmpl</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> harbor.yml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 修改 harbor.yml</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">vim</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> harbor.yml</span></span></code></pre></div><blockquote><p>主要看<code>hostname</code>、<code>port</code>、<code>harbor_admin_password</code>、<code>data_volume</code>这几个参数</p><p><strong>hostname</strong>：改成当前主机 ip 地址或者是域名（重要）</p><p><strong>port</strong>：有两个 port，一个是<code>http</code>的<code>80</code>和<code>https</code>的<code>443</code>(https注意有个ssl证书，如果<code>没有证书</code>建议直接将相关配置注释掉，否则会<code>报错</code>)</p><p><strong>harbor_admin_password</strong>：后台管理页面的默认密码</p><p><strong>data_volume</strong>：数据的存储卷地址</p></blockquote><p><strong>补充</strong></p><blockquote><p>我为了方便演示只修改了<code>hostname</code>和注释掉了<code>https</code>的相关配置，其他的全部默认</p></blockquote><p><img src="`+l+'" alt="image-20240913172832630" width="2760" height="1790"></p></li><li><p>安装</p><div class="language-bash" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">./install.sh</span></span></code></pre></div><p><img src="'+n+'" alt="image-20240913173014352" width="2972" height="2270"></p></li><li><p>启动</p><div class="language-bash" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker-compose</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> up</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span></span></code></pre></div><p><img src="'+p+'" alt="image-20240913173328445" width="5348" height="3258"></p><p><img src="'+h+'" alt="image-20240913173351808" width="3822" height="504"></p></li></ol></li></ol><h3 id="访问" tabindex="-1"><a class="header-anchor" href="#访问"><span>访问</span></a></h3><ol><li><p>访问地址</p><div class="language-http" data-ext="http" data-title="http"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">http://ip:端口</span></span></code></pre></div><p><img src="'+r+'" alt="image-20240913173542005" width="3594" height="1762"></p></li><li><p>登录</p><div class="language-tex" data-ext="tex" data-title="tex"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>默认账户密码：admin/Harbor12345</span></span></code></pre></div><p><img src="'+g+'" alt="image-20240913173646480" width="3600" height="1328"></p></li></ol>',8),b=[m];function u(v,y){return a(),e("div",null,b)}const _=s(k,[["render",u],["__file","index.html.vue"]]),D=JSON.parse(`{"path":"/article/rii2w8ri/","title":"Harbor 安装及配置","lang":"zh-CN","frontmatter":{"title":"Harbor 安装及配置","author":"HiCheer","createTime":"2024/09/12 11:24:33","permalink":"/article/rii2w8ri/","tags":["运维","Docker","Harbor"],"head":[["script",{"id":"check-dark-mode"},";(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;if (um === 'dark' || (um !== 'light' && sm)) {document.documentElement.classList.add('dark');}})();"],["script",{"id":"check-mac-os"},"document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))"]]},"headers":[{"level":3,"title":"前言","slug":"前言","link":"#前言","children":[]},{"level":3,"title":"基础环境","slug":"基础环境","link":"#基础环境","children":[]},{"level":3,"title":"安装","slug":"安装","link":"#安装","children":[]},{"level":3,"title":"访问","slug":"访问","link":"#访问","children":[]}],"readingTime":{"minutes":1.83,"words":548},"git":{"createdTime":1726124423000,"updatedTime":1726222339000,"contributors":[{"name":"HiCheer-O","email":"chendangdang1998@gmail.com","commits":2}]},"filePathRelative":"运维/harbor/Harbor 安装及配置.md","categoryList":[{"id":"60eec8","sort":10009,"name":"运维"},{"id":"5b12cc","sort":10010,"name":"harbor"}]}`);export{_ as comp,D as data};
