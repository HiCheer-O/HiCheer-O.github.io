---
title: 从0写若依管理后台（一）
author: HiCheer
createTime: 2024/06/06 14:50:44
permalink: /article/8ir0sk8u/
tags:
  - 前端
  - VUE
---

### 前言
<a href= "https://gitee.com/y_project/RuoYi-Vue">官网前后端分离版本</a>。但是我需要包含接口文档的，这个仓库本身本身有引入 swagger，但是并没有完全实现，只给了实例，因此我将源代码整合了整合 swagger + knife4j ，并且实现了全部接口文档，整合后的代码仓库地址放到文章最后。
<a href= "https://gitee.com/y_project/RuoYi-Vue">官网前后端分离版本（包含接口文档）</a>。<br>
注意一点：<br>

- 数据库相关 sql，自己在创建完数据库后在执行；

  ![image-20240606150800916](assets/image-20240606150800916.png)

- 自己根据配置文件修改 mysql 的链接地址和数据库名称，还有 redis 的地址；

  ![image-20240606150909802](assets/image-20240606150909802-7657781.png)

  ![image-20240606151040107](assets/image-20240606151040107.png)
---
### 环境介绍

| 类别           | 详情                             |
| -------------- | -------------------------------- |
| 电脑及系统版本 | MacBook Pro Apple M1 Pro、14.1.2 |
| node 版本      | v18.20.2                         |
| 下载工具       | pnpm                             |
| 框架           | vue3                             |
| 构建工具       | vite                             |
| 组件           | Element-plus                     |
| 开发工具       | WebStorm 2024.1.2                |
| TS的语法       | 没有使用，纯 JS                  |
---
### 开始前建议

- 界面设计参考，若依在线的体验地址<a href='https://vue.ruoyi.vip/login'>相关跳转</a>
- 页面不会写的借助 ChatGPT 来写<a href='https://chatgpt.com/'>相关跳转</a>
- 遇到不会的问题：ChatGPT、百度、Chrome
---
### 项目创建

1. 项目创建

   ```bash
   pnpm create vite
   ```

   ![image-20240606153258614](assets/image-20240606153258614.png)

2. 设置项目名称

   ```bash
   ruoyi-ui
   ```

   ![image-20240606153415203](assets/image-20240606153415203.png)

3. 框架选择

   ```bash
   vue
   ```

   ![image-20240606153503955](assets/image-20240606153503955.png)

4. 数据类型选择

   ```bash
   JavaScript
   ```

   ![image-20240606153610877](assets/image-20240606153610877.png)

5. 创建完成

   ![image-20240606153651301](assets/image-20240606153651301.png)

---

### 开发工具打开项目

1. 开发工具中打开项目

   ![image-20240606154045870](assets/image-20240606154045870.png)

2. 安装相关依赖（注意是项目的根目录下）

   ```bash
   pnpm install
   ```

   ![image-20240606154327488](assets/image-20240606154327488.png)

3. 运行项目

   ```bash
   pnpm run dev
   ```

   ![image-20240606154442926](assets/image-20240606154442926.png)

4. 点击链接

   ![image-20240606154539105](assets/image-20240606154539105.png)

---

### 创建企业开发项目目录

1. 删除项目本身自带的文件

   删除前：

   ![image-20240606154736034](assets/image-20240606154736034.png)

   删除后：

   ![image-20240606155029109](assets/image-20240606155029109.png)

2. 删除 App.vue 中没有的代码

   删除前：

   ![image-20240606155200605](assets/image-20240606155200605.png)

   删除后：

   ![image-20240606155228866](assets/image-20240606155228866.png)

3. 创建目录

   ```text
   api --- 后台接口
   assets --- 相关资源（图片等）
   component --- 组件
   layout --- 布局
   plugins --- 插件
   router --- 路由
   views --- 视图（页面）
   ```

   ![image-20240606161456303](assets/image-20240606161456303.png)
---

### 登录/注册页面

1. 创建登录/注册页面

   ![image-20240606162237546](assets/image-20240606162237546.png)

   ![image-20240606162301165](assets/image-20240606162301165.png)

2. 根目录配置

   在开发期间我们为了便于文件之间相互引用，一般是相对路径/绝对路径，再不然是项目根路径，我们一般都只在 src 目录下开发，所以我们配置一个‘@’符号表示 src 在项目中的路径，因此在表示路径的时候只需要‘@/views/login.vue’，就可以指向该文件。下面有具体的引入和使用。

   - 设置“@”

     ```js
     import { fileURLToPath, URL } from 'node:url'
     resolve: {
           // 别名
         alias: {
           // 设置 @ 符号为 ‘src’的根路径
           '@': fileURLToPath(new URL('./src', import.meta.url))
         }
     }
     ```

     ![image-20240606172223230](assets/image-20240606172223230.png)

   - 使用方式

     后面的文章中有具体的使用方式，这里不做示例。

3. 配置路由

   - 安装路由插件（<a href='https://router.vuejs.org/zh/installation.html'>官方文档</a>）

     ```bash
     pnpm add vue-router@4
     ```

     ![image-20240606163101406](assets/image-20240606163101406.png)

   - 创建路由，并配置登录与注册的路由

     ```js
     import { createWebHashHistory, createRouter } from 'vue-router'
     
     // 路由地址信息
     const routes = [
         { path: "/login", component: () => import('@/views/login.vue') },
         { path: "/register", component: () => import('@/views/register.vue') },
     ]
     
     // 创建路由
     const router = createRouter({
         // 忽略路由器的 URL
         history: createWebHashHistory(),
         // 配置路由信息
         routes,
     })
     
     export default router
     ```

     ![image-20240606172547781](assets/image-20240606172547781.png)

   - 将路由注册到项目中

     ```js
     import router from "@/router/index.js";
     
     createApp(App)
         .use(router)
         .mount('#app')
     ```

     ![image-20240606172701212](assets/image-20240606172701212.png)

   - 将路由模块的页面引入到主页面中

     ```vue
     <router-view />
     ```

     ![image-20240606173430871](assets/image-20240606173430871.png)

   - 测试页面是否配置成功

     ![image-20240606173558981](assets/image-20240606173558981.png)

     ![image-20240606173625656](assets/image-20240606173625656.png)

     OK，完成。
---
### 引入Element-Ui-plus

1. 官方文档

   <a href='https://element-plus.org/zh-CN/guide/installation.html'>Element-Ui-plus</a>

2. 安装

   ```bash
   pnpm install element-plus
   ```

   ![image-20240606174310744](assets/image-20240606174310744.png)

3. 导入（我选择按需导入，也是官方推荐）

   - 这里用到了官方插件，实现按需导入

     ```bash
     pnpm install -D unplugin-vue-components unplugin-auto-import
     ```

     ![image-20240606174611864](assets/image-20240606174611864.png)

   - 配置插件

     ```js
     import AutoImport from 'unplugin-auto-import/vite'
     import Components from 'unplugin-vue-components/vite'
     import { ElementPlusResolver } from 'unplugin-vue-components/resolvers'
     
     AutoImport({
         resolvers: [ElementPlusResolver()],
     }),
     Components({
         resolvers: [ElementPlusResolver()],
     })
     ```

     ![image-20240606182516235](assets/image-20240606182516235.png)
---
### 优化登录注册页面

注意：如果页面不会写，建议使用 ChatGPT 帮你生成一些基础的页面，再配合 Element-plus 官方文档进行调整，因为我就是这样开发的。

1. 美化登录页面

   - 基础美化

     ```vue
     <script setup>
     import { ref } from 'vue';
     import 'element-plus/theme-chalk/index.css';
     
     // 初始化表单
     const userForm = ref({
       username: '',
       password: '',
       captcha: '',
     });
     
     // 收集表单参数
     const form = ref()
     
     // 表单规则检验
     const userFormRules = {
       username: [
         { required: true, message: '请输入您的账号', trigger: 'blur' },
       ],
       password: [
         { required: true, message: '请输入您的密码', trigger: 'blur' },
       ],
       captcha: [
         { required: true, message: '请输入验证码', trigger: 'blur' },
       ]
     }
     
     const captchaUrl = ref('');
     
     const refreshCaptcha = () => {
       // 这里可以添加刷新验证码的逻辑
       captchaUrl.value = '';
     };
     
     // 登录提交
     const onSubmit = async () => {
     };
     
     </script>
     
     <template>
       <div class="login-container">
         <el-form
             :model="userForm"
             :rules="userFormRules"
             ref="form"
             label-width="0px">
           <h3 class="title" style="color: #707070">若依后台管理系统</h3>
           <el-form-item prop="username">
             <el-input
                 v-model="userForm.username"
                 placeholder="账号"
             >
             </el-input>
           </el-form-item>
           <el-form-item prop="password">
             <el-input
                 v-model="userForm.password"
                 type="password"
                 placeholder="密码"
             >
             </el-input>
           </el-form-item>
           <el-form-item prop="captcha">
             <el-row :gutter="20">
               <el-col :span="14">
                 <el-input
                     v-model="userForm.captcha"
                     placeholder="验证码"
                 >
                 </el-input>
               </el-col>
               <el-col :span="10">
                 <img :src="captchaUrl" alt="captcha" @click="refreshCaptcha" class="captcha-img" />
               </el-col>
             </el-row>
           </el-form-item>
           <el-form-item>
             <el-button type="primary" @click="onSubmit" style="width: 100%;">登录</el-button>
           </el-form-item>
         </el-form>
       </div>
     </template>
     
     <style scoped>
     .login-container {
       max-width: 400px;
       margin: auto;
       padding: 20px;
       background: white;
       border-radius: 8px;
       box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
     }
     .captcha-img {
       cursor: pointer;
       border: 1px solid #dcdfe6;
       height: 40px;
     }
     </style>
     ```

     ![image-20240606182930272](assets/image-20240606182930272.png)

     页面展示

     ![image-20240606182958147](assets/image-20240606182958147.png)

   - 进阶（在 input 输入框上加图标）

     安装 element-icon 库<a href='https://element-plus.org/zh-CN/component/icon.html'>官方文档</a>

     ```bash
     pnpm install @element-plus/icons-vue
     ```

     ![image-20240606183408915](assets/image-20240606183408915.png)

     根据官方文档说明插入

     <a href='https://element-plus.org/zh-CN/component/input.html'>input 官方文档</a>

     ![image-20240606183725172](assets/image-20240606183725172.png)

     我的代码

     ![image-20240606184028096](assets/image-20240606184028096.png)

     ![image-20240606184044246](assets/image-20240606184044246.png)

2. 美化注册页面（这里就不贴代码了）

   ![image-20240606184519125](assets/image-20240606184519125.png)

   ![image-20240606184540247](assets/image-20240606184540247.png)

3. 登录页面与注册页面相互跳转

   - 登录页面跳转注册页

     ![image-20240606185011135](assets/image-20240606185011135.png)

     ![image-20240606185039841](assets/image-20240606185039841.png)

   - 注册页面跳转登录页面

     ![image-20240606185223183](assets/image-20240606185223183.png)

     ![image-20240606185250290](assets/image-20240606185250290.png)
---
### 配置统一发送请求对象
1. 安装axios

   <a href='https://axios-http.com/zh/docs/intro'>官网地址</a>

   ```
   pnpm install axios
   ```

   ![image-20240606190153198](assets/image-20240606190153198.png)

2. 创建`request.js`类

   添加添加公共方法、设置请求基地址（baseURL）,设置拦截器

   ```js
   import axios from 'axios'
   
   // 请求地址
   const baseURL = 'http://localhost:8080'
   // 公共请求方法
   const instance = axios.create({
   	baseURL,
   	timeout: 5000,
   })
   
   // 添加请求拦截器
   axios.interceptors.request.use(function (config) {
   	// 在发送请求之前做些什么
   	return config;
   }, function (error) {
   	// 对请求错误做些什么
   	return Promise.reject(error);
   });
   
   // 添加响应拦截器
   axios.interceptors.response.use(function (response) {
   	// 2xx 范围内的状态码都会触发该函数。
   	// 对响应数据做点什么
   	return response;
   }, function (error) {
   	// 超出 2xx 范围的状态码都会触发该函数。
   	// 对响应错误做点什么
   	return Promise.reject(error);
   });
   
   ```

   ![image-20240606190858130](assets/image-20240606190858130.png)

   这些在官网都有介绍，直接拷贝使用，具体的拦截器逻辑自己根据业务实现。

---

